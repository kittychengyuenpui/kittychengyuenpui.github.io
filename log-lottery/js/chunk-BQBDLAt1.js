import{s as t}from"./chunk-BqjzUA-v.js";import{a as s}from"./chunk-Cv_h2SVa.js";import{u as e}from"./chunk-CDNb57LM.js";import{l as n}from"./chunk-D3YcvhA7.js";import{a6 as a,r as i,o as r,aR as o,W as c,X as l,F as u,a_ as m,be as p}from"./chunk-BB7IEB5B.js";import"./chunk-Dq6ymT-8.js";import"./chunk-DyqAhB7D.js";import"./chunk-B8dymozY.js";import"./chunk-CShO9xrd.js";import"./chunk-BP0RZxjf.js";import"./chunk-yaJDdhye.js";import"./chunk-DorFIKXF.js";import"./chunk-Brhz0LsG.js";import"./chunk-DCTqbsaT.js";import"./chunk-C6Zwkpkb.js";import"./chunk-BLnK4V6m.js";import"./chunk-Q9bklZT_.js";import"./chunk-iVZSWji-.js";import"./chunk-6OeFQMrk.js";import"./chunk-D6zm6W2C.js";import"./chunk-Cjrd7Wf_.js";const k={class:"flex gap-3"},h={for:"explore"},b=["accept"],d={class:"p-0"},j={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},f={class:"flex gap-3"},g=["onClick"],v=["onClick"],y=a({__name:"MusicConfig",setup(a){const y=i(0),C=n.createInstance({name:"audioStore"}),w=e().globalConfig,{getMusicList:x}=t(w),M=i("audio/*"),L=i(x),S=()=>{w.resetMusicList(),C.clear()},I=()=>{w.clearMusicList(),C.clear()},_=async()=>{(await C.keys()).length>0&&C.iterate(((t,s)=>{w.addMusic({id:s+(new Date).getTime().toString(),name:s,url:"Storage"})}))},D=async t=>{if(!/audio*/.test(t.target.files[0].type))return void(y.value=3);let{dataUrl:e,fileName:n}=await s(t.target.files[0]);C.setItem((new Date).getTime().toString()+"+"+n,e).then((()=>{y.value=1,_()})).catch((()=>{y.value=2}))};return r((()=>{_()})),(t,s)=>(o(),c("div",null,[l("div",k,[l("button",{class:"btn btn-primary btn-sm",onClick:S},"重置音樂列表"),l("label",h,[l("input",{type:"file",class:"",id:"explore",style:{display:"none"},onChange:D,accept:M.value},null,40,b),s[0]||(s[0]=l("span",{class:"btn btn-primary btn-sm"},"上傳音樂",-1))]),l("button",{class:"btn btn-error btn-sm",onClick:I},"删除所有")]),l("div",null,[l("ul",d,[(o(!0),c(u,null,m(L.value,(t=>(o(),c("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[l("div",j,[l("span",null,p(t.name),1)]),l("div",f,[l("button",{class:"btn btn-primary btn-xs",onClick:s=>(async t=>{w.setCurrentMusic(t,!1)})(t)},"播放",8,g),l("button",{class:"btn btn-error btn-xs",onClick:s=>(t=>{w.removeMusic(t.id),C.removeItem(t.name)})(t)},"删除",8,v)])])))),128))])])]))}});export{y as default};
