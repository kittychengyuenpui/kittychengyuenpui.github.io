import{a6 as e,c as l,aR as a,W as t,X as o,F as s,a_ as r,bM as u,aE as n,r as c,w as i,o as d,bJ as p,bz as m,be as v,U as b,bA as f,by as h,u as C,a3 as w}from"./chunk-BB7IEB5B.js";import{a as x,u as k,i as g,e as y}from"./chunk-C1JE5GCO.js";import{s as j}from"./chunk-BqjzUA-v.js";import{t as L}from"./chunk-yaJDdhye.js";import{z as V}from"./chunk-BsB6A5Ns.js";import{d as P}from"./chunk-CShO9xrd.js";import{r as _}from"./chunk-Dfvxk86G.js";import"./chunk-DyqAhB7D.js";import"./chunk-B8dymozY.js";import"./chunk-D3YcvhA7.js";import"./chunk-BP0RZxjf.js";import"./chunk-DorFIKXF.js";import"./chunk-Brhz0LsG.js";import"./chunk-DCTqbsaT.js";import"./chunk-C6Zwkpkb.js";import"./chunk-BLnK4V6m.js";import"./chunk-Q9bklZT_.js";import"./chunk-iVZSWji-.js";import"./chunk-6OeFQMrk.js";import"./chunk-D6zm6W2C.js";import"./chunk-Cjrd7Wf_.js";import"./chunk-Dq6ymT-8.js";import"./chunk-DJ_qK68I.js";import"./chunk-CTGgxsD4.js";import"./chunk-B-a44JGF.js";import"./chunk-BedWOaN-.js";import"./chunk-CPwNd-N2.js";import"./chunk-CKleymLE.js";import"./chunk-_iZV8NMP.js";const U={class:"w-full h-auto"},T=["onClick"],R=x(e({__name:"PatternSetting",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const c=e,i=l((()=>c));return(e,l)=>(a(),t("div",U,[o("ul",{class:"pattern-list",style:n({gridTemplateColumns:"repeat("+i.value.rowCount+",1fr)"})},[(a(!0),t(s,null,r(7*i.value.rowCount,(e=>(a(),t("li",{onClick:u((l=>((e,l)=>{if(i.value.patternList.includes(l)){const e=i.value.patternList.indexOf(l);i.value.patternList.splice(e,1)}else i.value.patternList.push(l)})(0,e)),["stop"]),class:"w-5 h-5",key:e,style:n({backgroundColor:i.value.patternList.includes(e)?i.value.patternColor:i.value.cardColor})},null,12,T)))),128))],4)]))}}),[["__scopeId","data-v-3804a51e"]]),S={class:"modal-box"},z={class:"modal-action"},A={method:"dialog",class:"flex gap-3"},I={class:"mb-8"},D={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},N={class:""},q={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},B={class:""},F={class:"help"},M={key:0,class:"text-sm text-red-400 help-text"},O={class:"tooltip","data-tip":"該項比較耗費時間和性能"},E=["disabled"],J={class:"loading loading-ring loading-md"},W={class:"w-full max-w-xs form-control"},X=["value"],G={class:"w-full max-w-xs form-control"},H=["value"],K={class:"w-full max-w-xs form-control"},Q={class:"w-full max-w-xs form-control"},Y={class:"w-full max-w-xs form-control"},Z={class:"flex flex-row w-full max-w-xs gap-10 mb-10 form-control"},$={class:"w-full max-w-xs mb-10 form-control"},ee={class:"w-full max-w-xs form-control"},le={class:"flex flex-row items-center w-full gap-24 mb-0 form-control"},ae={class:"h-auto"},te={class:"flex w-full h-24 gap-3 m-0"},oe={class:"w-full max-w-xs mb-10 form-control"},se=["checked"],re=e({__name:"FaceConfig",setup(e){const l=k().globalConfig,n=k().personConfig,x=k().prizeConfig,{getTopTitle:U,getTheme:T,getPatterColor:re,getPatternList:ue,getCardColor:ne,getLuckyColor:ce,getTextColor:ie,getCardSize:de,getTextSize:pe,getRowCount:me,getIsShowPrizeList:ve,getBackground:be,getImageList:fe}=j(l),{getAlreadyPersonList:he,getNotPersonList:Ce}=j(n),we=c(),xe=c(),ke=c(0),ge=c(T.value.name),ye=c(structuredClone(U.value)),je=c(structuredClone(ne.value)),Le=c(structuredClone(ce.value)),Ve=c(structuredClone(ie.value)),Pe=c(structuredClone(de.value)),_e=c(structuredClone(pe.value)),Ue=c(structuredClone(me.value)),Te=c(structuredClone(ve.value)),Re=c(structuredClone(re.value)),Se=c(Object.keys(P)),ze=c(P),Ae=c(be.value),Ie=c({rowCount:Ue}),De=c({rowCount:""}),Ne=V.object({rowCount:V.number({required_error:"必填項",invalid_type_error:"必須填入數字"}).min(1,"最小為1").max(100,"最大為100")}),qe={rowCount:Ie.value.rowCount},Be=()=>{ke.value=2,setTimeout((()=>{const e=he.value.length,l=Ce.value.length;if(e<=0&&l<=0)return;const a=he.value.concat(Ce.value),t=a.slice(0,e),o=a.slice(e,l+e);n.deleteAllPerson(),n.addNotPersonList(o),n.addAlreadyPersonList(t,null),ke.value=0}),1e3)},Fe=()=>{l.setPatternList([])},Me=()=>{l.resetPatternList()},Oe=()=>{l.reset(),n.reset(),x.resetDefault(),window.location.reload()};return i((()=>Ie.value.rowCount),(()=>{var e;qe.rowCount=Ie.value.rowCount,(e=qe,Ne.parseAsync(e)).then((e=>{e.rowCount&&(ke.value=1,l.setRowCount(e.rowCount))})).catch((e=>{De.value.rowCount=e.issues[0].message}))})),i(ye,(e=>{l.setTopTitle(e)})),i(ge,(e=>{const a=ze.value[e];l.setTheme({name:e,detail:a}),L.themeChange(e),a.primary&&(g(a.primary)||y(a.primary))&&l.setCardColor(a.primary)}),{deep:!0}),i(je,(e=>{l.setCardColor(e)}),{deep:!0}),i(Le,(e=>{l.setLuckyCardColor(e)}),{deep:!0}),i(Re,(e=>{l.setPatterColor(e)})),i(Ve,(e=>{l.setTextColor(e)}),{deep:!0}),i(Pe,(e=>{l.setCardSize(e)}),{deep:!0}),i(Te,(()=>{l.setIsShowPrizeList(Te.value)})),i(Ae,(e=>{l.setBackground(e)})),d((()=>{})),(e,l)=>(a(),t(s,null,[o("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:xe,class:"border-none modal"},[o("div",S,[l[18]||(l[18]=o("h3",{class:"text-lg font-bold"},"提示!",-1)),l[19]||(l[19]=o("p",{class:"py-4"},"該操作會重置所有數據，是否繼續？",-1)),o("div",z,[o("form",A,[o("button",{class:"btn",onClick:l[0]||(l[0]=e=>xe.value.close())},"取消"),o("button",{class:"btn",onClick:Oe},"確定")])])])],512),o("div",null,[l[38]||(l[38]=o("h2",null,"全局配置",-1)),o("div",I,[o("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=e=>xe.value.showModal())},"重置所有數據")]),o("label",D,[o("div",N,[l[20]||(l[20]=o("div",{class:"label"},[o("span",{class:"label-text"},"標題")],-1)),p(o("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>ye.value=e),placeholder:"输入標題",class:"w-full max-w-xs input input-bordered"},null,512),[[m,ye.value]])])]),o("label",q,[o("div",B,[l[21]||(l[21]=o("div",{class:"label"},[o("span",{class:"label-text"},"列數")],-1)),p(o("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>Ie.value.rowCount=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[m,Ie.value.rowCount]]),o("div",F,[De.value.rowCount?(a(),t("span",M,v(De.value.rowCount),1)):b("",!0)])]),o("div",null,[o("div",O,[o("button",{class:"mt-5 btn btn-info btn-sm",disabled:1!=ke.value,onClick:Be},[l[22]||(l[22]=o("span",null,"重設佈局",-1)),p(o("span",J,null,512),[[f,2==ke.value]])],8,E)])])]),o("label",W,[l[24]||(l[24]=o("div",{class:"label"},[o("span",{class:"label-text"},"選擇主題")],-1)),p(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[4]||(l[4]=e=>ge.value=e)},[l[23]||(l[23]=o("option",{disabled:"",selected:""},"選取主題",-1)),(a(!0),t(s,null,r(Se.value,((e,l)=>(a(),t("option",{key:l,value:e},v(e),9,X)))),128))],512),[[h,ge.value]])]),o("label",G,[l[26]||(l[26]=o("div",{class:"label"},[o("span",{class:"label-text"},"選擇背景圖片")],-1)),p(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[5]||(l[5]=e=>Ae.value=e)},[l[25]||(l[25]=o("option",{disabled:"",selected:""},"選取背景圖片",-1)),(a(!0),t(s,null,r([{name:"無",url:"",id:""},...C(fe)],((e,l)=>(a(),t("option",{key:l,value:e},v(e.name),9,H)))),128))],512),[[h,Ae.value]])]),o("label",K,[l[27]||(l[27]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片顏色")],-1)),w(C(_),{ref_key:"colorPickerRef",ref:we,modelValue:je.value,"onUpdate:modelValue":l[6]||(l[6]=e=>je.value=e),"pure-color":je.value,"onUpdate:pureColor":l[7]||(l[7]=e=>je.value=e)},null,8,["modelValue","pure-color"])]),o("label",Q,[l[28]||(l[28]=o("div",{class:"label"},[o("span",{class:"label-text"},"中獎卡片顏色")],-1)),w(C(_),{ref_key:"colorPickerRef",ref:we,modelValue:Le.value,"onUpdate:modelValue":l[8]||(l[8]=e=>Le.value=e),"pure-color":Le.value,"onUpdate:pureColor":l[9]||(l[9]=e=>Le.value=e)},null,8,["modelValue","pure-color"])]),o("label",Y,[l[29]||(l[29]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字顏色")],-1)),w(C(_),{ref_key:"colorPickerRef",ref:we,modelValue:Ve.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Ve.value=e),"pure-color":Ve.value,"onUpdate:pureColor":l[11]||(l[11]=e=>Ve.value=e)},null,8,["modelValue","pure-color"])]),o("label",Z,[o("div",null,[l[30]||(l[30]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片寬度")],-1)),p(o("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=e=>Pe.value.width=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[m,Pe.value.width]])]),o("div",null,[l[31]||(l[31]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片高度")],-1)),p(o("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>Pe.value.height=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[m,Pe.value.height]])])]),o("label",$,[l[32]||(l[32]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字大小")],-1)),p(o("input",{type:"number","onUpdate:modelValue":l[14]||(l[14]=e=>_e.value=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[m,_e.value]])]),o("label",ee,[l[33]||(l[33]=o("div",{class:"label"},[o("span",{class:"label-text"},"高亮顏色")],-1)),w(C(_),{ref_key:"colorPickerRef",ref:we,modelValue:Re.value,"onUpdate:modelValue":l[15]||(l[15]=e=>Re.value=e),"pure-color":Re.value,"onUpdate:pureColor":l[16]||(l[16]=e=>Re.value=e)},null,8,["modelValue","pure-color"])]),o("label",le,[o("div",null,[l[34]||(l[34]=o("div",{class:"label"},[o("span",{class:"label-text"},"圖案设置")],-1)),o("div",ae,[w(R,{rowCount:C(me),cardColor:C(ne),patternColor:C(re),patternList:C(ue)},null,8,["rowCount","cardColor","patternColor","patternList"])])])]),o("div",te,[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:u(Fe,["stop"])},l[35]||(l[35]=[o("span",null,"清空圖案设置",-1)])),o("div",{class:"tooltip","data-tip":"默認圖案設置針對17列時有效，其他列數請自行设置"},[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:Me},l[36]||(l[36]=[o("span",null,"默認圖案设置",-1)]))])]),o("label",oe,[l[37]||(l[37]=o("div",{class:"label"},[o("span",{class:"label-text"},"是否顯示獎品列表")],-1)),o("input",{type:"checkbox",checked:Te.value,onChange:l[17]||(l[17]=e=>Te.value=!Te.value),class:"mt-2 border-solid checkbox checkbox-secondary border-1"},null,40,se)])])],64))}});export{re as default};
